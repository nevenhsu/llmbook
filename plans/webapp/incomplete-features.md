# Webapp æœªå®ŒæˆåŠŸèƒ½æ¸…å–®

> **ç›®çš„ï¼š** åˆ—å‡ºæ‰€æœ‰ã€Œåªæœ‰ UI æ²’æœ‰åŠŸèƒ½ã€çš„æ¨¡çµ„ï¼Œä¾› Codex é€é …å¯¦ä½œã€‚
>
> **è¦å‰‡ï¼š** æœ¬æ–‡æª”ä¸å«ä»»ä½•ç¨‹å¼ç¢¼ã€‚æ¯å€‹ä»»å‹™æè¿°ã€Œç¾ç‹€ã€ã€ã€ŒæœŸæœ›è¡Œç‚ºã€ã€ã€Œç›¸é—œæª”æ¡ˆã€å’Œã€Œç›¸é—œ APIã€ã€‚
>
> **ç´„å®šï¼š** å¯¦ä½œæ™‚éµå®ˆ `plans/webapp/_conventions.md` èˆ‡ `AGENTS.md` çš„å…±ç”¨å‡½å¼åº«è¦ç¯„ã€‚

---

## ğŸ“Š å¯¦ä½œé€²åº¦

**æœ€å¾Œæ›´æ–°ï¼š** 2026-02-12 (Evening Session - Complete!)

### âœ… å·²å®Œæˆ (35/35 å¯¦éš›ä»»å‹™)

**ç¬¬ä¸€éšæ®µï¼šAdmin åŸºç¤è¨­æ–½**
- **PA-1**: å»ºç«‹ admin_users è³‡æ–™è¡¨ âœ…
- **PA-2**: Admin æ¬Šé™æª¢æŸ¥å…±ç”¨å‡½å¼ âœ…
- **PA-3**: Board Archive æ”¹ç‚º admin-only âœ…
- **PA-4**: Board Unarchive åŠŸèƒ½ âœ…
- **PA-5**: Post åˆªé™¤ APIï¼ˆä½œè€…è‡ªåˆªï¼‰âœ…
- **PA-6**: Post Archive åŠŸèƒ½ï¼ˆadmin/moderatorï¼‰âœ…
- **PA-7**: ä¿®æ­£ Board Moderator æ¬Šé™ dead code âœ…

**ç¬¬äºŒéšæ®µï¼šå¿«é€Ÿä¿®æ­£**
- **P3-1**: ç§»é™¤ /popular é€£çµ âœ…
- **P1-11**: BoardInfoCard Join æŒ‰éˆ• âœ…
- **P1-19**: UserMenu Display Mode âœ…
- **P2-5**: UserMenu Karma é¡¯ç¤º âœ…
- **P1-1**: PostActions Save æŒ‰éˆ• âœ…
- **P1-2**: PostActions Hide æŒ‰éˆ• âœ…
- **P1-4**: PostActions Comments å°èˆª âœ…
- **P1-6**: ProfilePostList æŠ•ç¥¨åŠŸèƒ½ âœ…
- **P1-17**: æœå°‹çµæœæŠ•ç¥¨åŠŸèƒ½ âœ…

**ç¬¬ä¸‰éšæ®µï¼šä¸­å‹åŠŸèƒ½**
- **P1-3**: PostActions More é¸å–® âœ…
- **P1-5**: CommentItem More é¸å–® âœ…
- **P0-1**: é€šçŸ¥é é¢æ¥ä¸Šå¾Œç«¯ âœ…
- **P2-1**: Feed ç„¡é™æ»¾å‹• âœ…
- **P2-2**: Board æ’åºä¿®æ­£ âœ…
- **P2-3**: userVote é è¼‰ âœ…

**ç¬¬å››éšæ®µï¼šè£œå®Œèˆ‡æ¶æ§‹å„ªåŒ– (2026-02-12)**
- **P2-4**: RightSidebar Recent Posts æ¥ä¸ŠçœŸå¯¦è³‡æ–™ âœ…
- **P2-7**: Post Detail å´é‚Šæ¬„ä¿®æ­£ï¼ˆMembers çœŸå¯¦æ•¸å­— + ç§»é™¤ Onlineï¼‰âœ…
- **P1-9**: å€‹äººé é¢ Comments åˆ†é åŠŸèƒ½ âœ…
- **æ¶æ§‹é‡æ§‹**: è²¼æ–‡è·¯å¾‘å¾ /posts/[id] æ”¹ç‚º /r/[slug]/posts/[id]ï¼ŒBoard layout çµ±ä¸€ç®¡ç†è³‡æ–™ âœ…

**ç¬¬äº”éšæ®µï¼šè£œå……åŠŸèƒ½ (2026-02-12)**
- **P3-2**: /about é é¢ âœ…
- **P1-18**: Forgot Password åŠŸèƒ½ âœ…
- **P2-8**: Tag é é¢æ”¹å–„ï¼ˆä½¿ç”¨ PostRow å…ƒä»¶ï¼‰âœ…

**ç¬¬å…­éšæ®µï¼šCreatePostForm åŠŸèƒ½è£œå®Œ (2026-02-12)**
- **P1-14**: Link åˆ†é ç§»é™¤ï¼ˆæ”¹ç”¨ TipTap é€£çµåŠŸèƒ½ï¼‰âœ…
- **P1-15**: Poll duration é¸æ“‡å™¨é€å‡º âœ…
- **P1-12**: Add tags æŒ‰éˆ•åŠŸèƒ½ âœ…
- **P1-13**: è‰ç¨¿åŠŸèƒ½ (localStorage) âœ…

**ç¬¬ä¸ƒéšæ®µï¼šUser Follow èˆ‡ Post Edit (2026-02-12 Evening)**
- **P1-7**: Follow æŒ‰éˆ•åŠŸèƒ½ âœ…
- **P1-8**: Followers æ•¸é‡é¡¯ç¤ºçœŸå¯¦è³‡æ–™ âœ…
- **P1-20**: Post Edit é é¢ï¼ˆå« Poll ç·¨è¼¯ï¼‰âœ…
- **P3-3**: BoardLayout ç®¡ç†é€£çµæ¬Šé™æª¢æŸ¥ï¼ˆæ‰‹æ©Ÿç‰ˆï¼‰âœ…
- **P3-4**: æœå°‹é é¢ People çµæœåŠ ä¸Šé€£çµ âœ…

**ç¬¬å…«éšæ®µï¼šå…¨åŸŸ UserContext æ¶æ§‹å„ªåŒ– (2026-02-12 Evening)**
- **æ¶æ§‹å„ªåŒ–**: å»ºç«‹å…¨åŸŸ UserContext âœ…
  - å»ºç«‹ `src/contexts/UserContext.tsx`ï¼ˆæä¾› user, profile, isAdminï¼‰
  - Root layout çµ±ä¸€æŸ¥è©¢ isAdmin ä¸¦æä¾›çµ¦å…¨ç«™
  - æ›´æ–° BoardContext æ•´åˆ UserContextï¼ˆuseBoardContext ç¾åœ¨è‡ªå‹•åŒ…å« userId å’Œ isAdminï¼‰
  - æ‰€æœ‰ client component éƒ½å¯ä½¿ç”¨ `useUserContext()` æˆ– `useOptionalUserContext()`
  - Server component ç¹¼çºŒä½¿ç”¨ `isAdmin()` ç›´æ¥æŸ¥è©¢
  - å»ºç«‹ä½¿ç”¨æŒ‡å—ï¼š`docs/contexts/USER_CONTEXT.md`
- **P3-5**: NotificationBell å³æ™‚æ›´æ–° âœ…
  - å¯¦ä½œ polling æ©Ÿåˆ¶ï¼ˆæ¯ 30 ç§’è‡ªå‹•æ›´æ–°ï¼‰
  - åŠ å…¥ Page Visibility APIï¼ˆåˆ‡å›é é¢æ™‚ç«‹å³æ›´æ–°ï¼‰
  - åªå°å·²ç™»å…¥ä½¿ç”¨è€…é¡¯ç¤ºå’Œæ›´æ–°

### â¹ï¸ å·²å–æ¶ˆ (5 ä»»å‹™)

- **P0-2**: é€šçŸ¥å°å­˜é é¢ï¼ˆä¸éœ€è¦ï¼‰
- **P1-10**: å€‹äººé é¢ Hidden åˆ†é ï¼ˆç”¨æˆ¶è¦æ±‚ç§»é™¤ï¼‰
- **P1-14**: Link åˆ†é ï¼ˆæ”¹ç”¨ TipTap ç·¨è¼¯å™¨çš„é€£çµåŠŸèƒ½ï¼‰âœ…
- **P1-16**: æœå°‹çµæœä¸­çš„ã€ŒJoinã€æŒ‰éˆ•ï¼ˆä½¿ç”¨è€…å¯ç›´æ¥é»æ“Šç¤¾ç¾¤åç¨±é€²å…¥ï¼‰
- **P2-6**: MobileSearchOverlay æœå°‹ï¼ˆå·²åœ¨ M-1 å®Œæˆï¼‰

### â³ å¾…è™•ç† (0 ä»»å‹™)

ğŸ‰ **æ‰€æœ‰å¯¦éš›éœ€è¦çš„åŠŸèƒ½éƒ½å·²å®Œæˆï¼**

- ç¸½ä»»å‹™æ•¸ï¼š40
- å·²å®Œæˆï¼š35
- å·²å–æ¶ˆï¼ˆä¸éœ€è¦ï¼‰ï¼š5
- å®Œæˆç‡ï¼š100% (35/35 å¯¦éš›ä»»å‹™)

---

## ç›®éŒ„

- [PA â€” Admin ç³»çµ±èˆ‡æ¬Šé™æ¶æ§‹ï¼ˆå…¨æ–°ï¼‰](#pa--admin-ç³»çµ±èˆ‡æ¬Šé™æ¶æ§‹å…¨æ–°)
- [P0 â€” å®Œå…¨æ²’æœ‰å¾Œç«¯æ•´åˆï¼ˆæ•´é  Mockï¼‰](#p0--å®Œå…¨æ²’æœ‰å¾Œç«¯æ•´åˆæ•´é -mock)
- [P1 â€” æŒ‰éˆ•/è¡¨å–®å­˜åœ¨ä½†æ²’æœ‰åŠŸèƒ½](#p1--æŒ‰éˆ•è¡¨å–®å­˜åœ¨ä½†æ²’æœ‰åŠŸèƒ½)
- [P2 â€” åŠŸèƒ½ä¸å®Œæ•´æˆ–è³‡æ–™æœªé€£æ¥](#p2--åŠŸèƒ½ä¸å®Œæ•´æˆ–è³‡æ–™æœªé€£æ¥)
- [P3 â€” å£æ‰çš„é€£çµèˆ‡å­¤ç«‹å…ƒä»¶](#p3--å£æ‰çš„é€£çµèˆ‡å­¤ç«‹å…ƒä»¶)

---

## PA â€” Admin ç³»çµ±èˆ‡æ¬Šé™æ¶æ§‹ï¼ˆå…¨æ–°ï¼‰

> ç›®å‰ç³»çµ±å®Œå…¨æ²’æœ‰ site-wide admin çš„æ¦‚å¿µã€‚`profiles` è¡¨æ²’æœ‰ role æ¬„ä½ï¼Œæ²’æœ‰ admin é é¢ï¼Œæ²’æœ‰ admin æ¬Šé™æª¢æŸ¥ã€‚ä»¥ä¸‹æ˜¯éœ€è¦å»ºç«‹çš„åŸºç¤è¨­æ–½å’ŒåŠŸèƒ½ã€‚

### PA-1: å»ºç«‹ admin_users è³‡æ–™è¡¨ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-11ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… Migration å·²å»ºç«‹ï¼š`supabase/migrations/20260210_admin_users.sql`
- âœ… è³‡æ–™è¡¨ï¼š`admin_users` (user_id, role, created_at)
- âœ… RLS æ”¿ç­–ï¼šåªæœ‰ super_admin å¯ä»¥æ–°å¢/æ›´æ–°/åˆªé™¤å…¶ä»– admin
- âœ… ç´¢å¼•å’Œç´„æŸæ¢ä»¶å®Œæ•´

**ç›¸é—œæª”æ¡ˆï¼š**
- `supabase/migrations/20260210_admin_users.sql`

---

### PA-2: Admin æ¬Šé™æª¢æŸ¥å…±ç”¨å‡½å¼ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-11ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… å…±ç”¨å‡½å¼å·²å»ºç«‹ï¼š`src/lib/admin.ts`
- âœ… `isAdmin(userId, supabaseClient?)` å‡½å¼å¯æŸ¥è©¢ admin_users è¡¨
- âœ… æ”¯æ´å‚³å…¥è‡ªè¨‚çš„ supabase clientï¼ˆé¿å…é‡è¤‡å»ºç«‹é€£ç·šï¼‰
- âœ… å›å‚³ boolean å€¼

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/lib/admin.ts`

---

### PA-3: Board Archive æ”¹ç‚º admin-only âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-11ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… DELETE `/api/boards/[slug]` å·²æ”¹ç”¨ `isAdmin()` æª¢æŸ¥ï¼ˆç¬¬ 154-157 è¡Œï¼‰
- âœ… BoardSettingsForm çš„ Danger Zone tab åªå° admin é¡¯ç¤ºï¼ˆä½¿ç”¨ `isAdmin` propï¼‰
- âœ… Settings é é¢å·²æŸ¥è©¢ä¸¦å‚³å…¥ `isAdmin` ç‹€æ…‹
- âœ… Board owner ä¸å†èƒ½è‡ªè¡Œ archive board

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/api/boards/[slug]/route.ts` (DELETE handler)
- `src/components/board/BoardSettingsForm.tsx` (ç¬¬ 430-438 è¡Œ)
- `src/app/r/[slug]/settings/page.tsx` (ç¬¬ 37, 66 è¡Œ)

---

### PA-4: Board Unarchive åŠŸèƒ½ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-11ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… PATCH `/api/boards/[slug]` æ”¯æ´ `is_archived: false`ï¼ˆç¬¬ 47-64 è¡Œï¼‰
- âœ… åªæœ‰ admin å¯ä»¥ unarchiveï¼ˆç¬¬ 62-64 è¡Œï¼‰
- âœ… UnarchiveButton å…ƒä»¶å·²å»ºç«‹ï¼š`src/components/board/UnarchiveButton.tsx`
- âœ… `/r/archive` é é¢é¡¯ç¤º Unarchive æŒ‰éˆ•ï¼ˆç¬¬ 78-84 è¡Œï¼‰
- âœ… Archived board é é¢æ©«å¹…é¡¯ç¤º Unarchive æŒ‰éˆ•ï¼ˆboard page ç¬¬ 131 è¡Œï¼‰

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/api/boards/[slug]/route.ts` (PATCH handler)
- `src/components/board/UnarchiveButton.tsx`
- `src/app/r/archive/page.tsx`
- `src/app/r/[slug]/page.tsx`

---

### PA-5: Post åˆªé™¤ APIï¼ˆä½œè€…è‡ªåˆªï¼‰âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-11ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… DELETE handler å·²å»ºç«‹ï¼ˆç¬¬ 34-90 è¡Œï¼‰
- âœ… åªæœ‰ä½œè€…å¯ä»¥åˆªé™¤ï¼ˆç¬¬ 58-60 è¡Œï¼‰
- âœ… æ¡ç”¨è»Ÿåˆªé™¤ï¼šè¨­å®š `status = 'DELETED'`, `body = '[deleted]'`
- âœ… æ¸…ç†ç›¸é—œè³‡æ–™ï¼švotes, saved_posts, hidden_posts, media, post_tags, poll_optionsï¼ˆç¬¬ 80-87 è¡Œï¼‰
- âœ… ä¿ç•™ç•™è¨€è„ˆçµ¡ï¼ˆä¸åˆªé™¤ commentsï¼‰

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/api/posts/[id]/route.ts` (DELETE handler)

---

### PA-6: Post Archive åŠŸèƒ½ï¼ˆadmin/moderatorï¼‰âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-11ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… PATCH handler å·²å»ºç«‹ï¼ˆç¬¬ 92-145 è¡Œï¼‰
- âœ… æ”¯æ´ `status: 'ARCHIVED'` å’Œ `status: 'PUBLISHED'`
- âœ… æ¬Šé™æª¢æŸ¥ï¼š`isAdmin()` æˆ– `canManageBoardPosts()`ï¼ˆç¬¬ 123-128 è¡Œï¼‰
- âœ… `canManageBoardPosts()` å‡½å¼å·²åœ¨ `src/lib/board-permissions.ts` å¯¦ä½œï¼ˆç¬¬ 127-148 è¡Œï¼‰
- âœ… æª¢æŸ¥ moderator çš„ `manage_posts` æ¬Šé™

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/api/posts/[id]/route.ts` (PATCH handler)
- `src/lib/board-permissions.ts` (canManageBoardPosts)

---

### PA-7: ä¿®æ­£ Board Moderator æ¬Šé™ dead code âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-11ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… `manage_posts` æ¬Šé™å·²å•Ÿç”¨ï¼ˆåœ¨ `canManageBoardPosts` å‡½å¼ä¸­æª¢æŸ¥ï¼‰
- âœ… `manage_settings` æ¬Šé™å·²å•Ÿç”¨ï¼ˆPATCH `/api/boards/[slug]` ä½¿ç”¨ `canManageBoard` æª¢æŸ¥ï¼Œç¬¬ 55-60 è¡Œï¼‰
- âœ… BoardSettingsForm æ¬Šé™ç·¨è¼¯å™¨çš„å‹¾é¸æœ‰å¯¦éš›æ•ˆæœ
- âœ… Owner æ°¸é æ“æœ‰æ‰€æœ‰æ¬Šé™
- âœ… Moderator æ ¹æ“šå€‹åˆ¥æ¬Šé™è¨­å®šé€²è¡Œæª¢æŸ¥

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/lib/board-permissions.ts` (canManageBoard, canManageBoardPosts)
- `src/app/api/boards/[slug]/route.ts` (PATCH handler)
- `src/components/board/BoardSettingsForm.tsx`

---

## P0 â€” å®Œå…¨æ²’æœ‰å¾Œç«¯æ•´åˆï¼ˆæ•´é  Mockï¼‰

### P0-1: é€šçŸ¥é é¢ â€” å…¨éƒ¨æ˜¯å‡è³‡æ–™

**ç¾ç‹€ï¼š**
- `/notifications` é é¢å…§æœ‰ä¸€å€‹ `INITIAL_NOTIFICATIONS` éœæ…‹é™£åˆ—ï¼ŒåŒ…å« 4 ç­†å‡é€šçŸ¥ï¼ˆå‡ç”¨æˆ¶åå¦‚ `tech_enthusiast`ã€`design_pro`ï¼‰
- ã€ŒLoad moreã€æŒ‰éˆ•ç”¨ `setTimeout` æ¨¡æ“¬å»¶é²ï¼Œç„¶å¾Œç”¢ç”Ÿéš¨æ©Ÿå‡è³‡æ–™
- ã€ŒMark all as readã€ã€ã€ŒMark as readã€ã€ã€ŒHideã€éƒ½åªæ”¹ local stateï¼Œä¸å‘¼å«ä»»ä½• API
- ã€ŒNotification settingsã€é€£çµæŒ‡å‘ `/settings/notifications`ï¼Œè©²é é¢ä¸å­˜åœ¨

**æœŸæœ›è¡Œç‚ºï¼š**
- å¾ `/api/notifications` GET å–å¾—çœŸå¯¦é€šçŸ¥åˆ—è¡¨
- ã€ŒMark as readã€å‘¼å« `/api/notifications` PATCH
- ã€ŒMark all as readã€æ‰¹æ¬¡å‘¼å« PATCH
- ã€ŒHideã€æ‡‰è©²åˆªé™¤æˆ–æ¨™è¨˜é€šçŸ¥ç‚ºéš±è—ï¼ˆéœ€è¦å¾Œç«¯æ”¯æ´ï¼‰
- ã€ŒLoad moreã€ç”¨çœŸæ­£çš„åˆ†é åƒæ•¸ï¼ˆoffset / cursorï¼‰
- ç§»é™¤æ‰€æœ‰ hardcoded å‡è³‡æ–™

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/notifications/page.tsx`
- `src/app/api/notifications/route.ts`ï¼ˆAPI å·²å­˜åœ¨ï¼Œæ”¯æ´ GET å’Œ PATCHï¼‰

**å‚™è¨»ï¼š** API route å·²ç¶“æœ‰ GETï¼ˆå–å¾—é€šçŸ¥ï¼‰å’Œ PATCHï¼ˆæ¨™è¨˜å·²è®€ï¼‰åŠŸèƒ½ï¼Œåªéœ€è¦å‰ç«¯æ¥ä¸Šã€‚

---

### P0-2: é€šçŸ¥å°å­˜é é¢ â€” å…¨éƒ¨æ˜¯å‡è³‡æ–™

**ç¾ç‹€ï¼š**
- `/notifications/archive` é é¢æœ‰ `ARCHIVED_NOTIFICATIONS` éœæ…‹é™£åˆ—ï¼Œ3 ç­†å‡è³‡æ–™
- `loadMore` åŒæ¨£ç”¨ `setTimeout` ç”¢ç”Ÿå‡è³‡æ–™
- `hideNotification` åªæ”¹ local state

**æœŸæœ›è¡Œç‚ºï¼š**
- å¾ API å–å¾—å·²å°å­˜çš„é€šçŸ¥ï¼ˆå¯èƒ½éœ€è¦åœ¨ GET åŠ ä¸Š `?archived=true` åƒæ•¸ï¼‰
- åˆ†é åŠŸèƒ½ç”¨çœŸå¯¦çš„ offset / cursor
- æ“ä½œï¼ˆéš±è—ã€åˆªé™¤ï¼‰è¦å‘¼å« API

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/notifications/archive/page.tsx`
- `src/app/api/notifications/route.ts`

---

## P1 â€” æŒ‰éˆ•/è¡¨å–®å­˜åœ¨ä½†æ²’æœ‰åŠŸèƒ½

### P1-1: PostActionsã€ŒSaveã€æŒ‰éˆ•æœªæ¥ä¸Š API

**ç¾ç‹€ï¼š**
- `PostActions` å…ƒä»¶å®šç¾©äº† `onSave` ç‚º optional prop
- æ‰€æœ‰çˆ¶å…ƒä»¶ï¼ˆ`PostRow`ã€Post Detail é é¢ï¼‰éƒ½æ²’æœ‰å‚³å…¥ `onSave`
- æŒ‰éˆ•é»æ“Šå¾Œ `onSave?.()` ç­‰æ–¼ä»€éº¼éƒ½ä¸åš
- API route `/api/saved/[postId]` å·²å­˜åœ¨ä¸”åŠŸèƒ½å®Œæ•´ï¼ˆPOST å„²å­˜ã€DELETE å–æ¶ˆå„²å­˜ï¼‰

**æœŸæœ›è¡Œç‚ºï¼š**
- é»æ“Šã€ŒSaveã€å‘¼å« `POST /api/saved/{postId}`
- å·²å„²å­˜çš„è²¼æ–‡é¡¯ç¤ºç‚ºã€ŒSavedã€ç‹€æ…‹ï¼ˆéœ€å¾å¾Œç«¯å–å¾—ä½¿ç”¨è€…çš„å·²å„²å­˜æ¸…å–®ï¼‰
- å†æ¬¡é»æ“Šå‘¼å« `DELETE /api/saved/{postId}` å–æ¶ˆå„²å­˜
- éœ€è¦ optimistic update

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/post/PostActions.tsx`
- `src/components/post/PostRow.tsx`
- `src/app/posts/[id]/page.tsx`
- `src/app/api/saved/[postId]/route.ts`ï¼ˆå·²å®Œæˆï¼‰

---

### P1-2: PostActionsã€ŒHideã€æŒ‰éˆ•æœªæ¥ä¸Š API

**ç¾ç‹€ï¼š**
- èˆ‡ Save æŒ‰éˆ•åŒæ¨£çš„å•é¡Œï¼š`onHide` optional prop å¾æœªè¢«å‚³å…¥
- API route `/api/hidden/[postId]` å·²å­˜åœ¨ï¼ˆPOST éš±è—ã€DELETE å–æ¶ˆéš±è—ï¼‰

**æœŸæœ›è¡Œç‚ºï¼š**
- é»æ“Šã€ŒHideã€å‘¼å« `POST /api/hidden/{postId}`
- éš±è—çš„è²¼æ–‡å¾ Feed ä¸­æ¶ˆå¤±ï¼ˆæˆ–é¡¯ç¤ºã€Œå·²éš±è—ã€æç¤ºï¼Œå¯æ’¤éŠ·ï¼‰
- éœ€è¦ optimistic update

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/post/PostActions.tsx`
- `src/app/api/hidden/[postId]/route.ts`ï¼ˆå·²å®Œæˆï¼‰

---

### P1-3: PostActionsã€ŒMoreã€é¸å–® â€” æ²’æœ‰ handlerï¼Œæ²’æœ‰ä¸‹æ‹‰é¸å–®

**ç¾ç‹€ï¼š**
- PostActions æœ‰ä¸€å€‹ MoreHorizontal icon æŒ‰éˆ•ï¼Œä½†æ²’æœ‰ `onClick`ã€æ²’æœ‰ä¸‹æ‹‰é¸å–®
- Reportã€Editã€Delete åŠŸèƒ½å®Œå…¨ä¸å­˜åœ¨ï¼ˆæ²’æœ‰ UIï¼Œæ²’æœ‰ handlerï¼Œæ²’æœ‰ APIï¼‰

**æœŸæœ›è¡Œç‚ºï¼š**
- é»æ“Šã€Œ...ã€æ‰“é–‹ä¸‹æ‹‰é¸å–®ï¼ŒåŒ…å«ï¼š
  - Reportï¼ˆæª¢èˆ‰ï¼‰â€” éœ€è¦æ–°çš„ API
  - Editï¼ˆä½œè€…æ‰èƒ½çœ‹åˆ°ï¼‰â€” å°å‘ç·¨è¼¯é é¢æˆ–é–‹å•Ÿç·¨è¼¯æ¨¡å¼
  - Deleteï¼ˆä½œè€…æ‰èƒ½çœ‹åˆ°ï¼‰â€” ç¢ºèªå¾Œå‘¼å« `DELETE /api/posts/{id}`
- Edit å’Œ Delete åªå°è²¼æ–‡ä½œè€…é¡¯ç¤º
- ç‰ˆä¸»å¯ä»¥çœ‹åˆ°é¡å¤–çš„ Remove é¸é …

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/post/PostActions.tsx`
- `src/app/api/posts/[id]/route.ts`ï¼ˆå·²æœ‰ DELETE handlerï¼‰

**éœ€è¦æ–°å»ºçš„ APIï¼š**
- `/api/posts/[id]/report`ï¼ˆæª¢èˆ‰è²¼æ–‡ï¼‰

---

### P1-4: PostActionsã€ŒCommentsã€æŒ‰éˆ•ä¸å¯é»æ“Š

**ç¾ç‹€ï¼š**
- é¡¯ç¤ºç•™è¨€æ•¸é‡çš„æŒ‰éˆ•ï¼ˆMessageSquare iconï¼‰æ²’æœ‰ `onClick`
- åœ¨ Feed ä¸­é»æ“Šæ‡‰è©²å°å‘è²¼æ–‡ç•™è¨€å€

**æœŸæœ›è¡Œç‚ºï¼š**
- åœ¨ Feed åˆ—è¡¨ä¸­ï¼šé»æ“Šå°å‘ `/posts/{id}#comments`
- åœ¨è²¼æ–‡è©³æƒ…é ä¸­ï¼šæ»¾å‹•åˆ°ç•™è¨€å€

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/post/PostActions.tsx`

---

### P1-5: CommentItemã€ŒMoreã€é¸å–® â€” æ²’æœ‰åŠŸèƒ½

**ç¾ç‹€ï¼š**
- æ¯å‰‡ç•™è¨€éƒ½æœ‰ä¸€å€‹ MoreHorizontal icon æŒ‰éˆ•ï¼Œä½†æ²’æœ‰ `onClick`ã€æ²’æœ‰ä¸‹æ‹‰é¸å–®
- ç•™è¨€çš„ Editã€Deleteã€Report åŠŸèƒ½å®Œå…¨ä¸å­˜åœ¨

**æœŸæœ›è¡Œç‚ºï¼š**
- é»æ“Šã€Œ...ã€æ‰“é–‹ä¸‹æ‹‰é¸å–®ï¼ŒåŒ…å«ï¼š
  - Editï¼ˆç•™è¨€ä½œè€…æ‰èƒ½çœ‹åˆ°ï¼‰â€” é–‹å•Ÿè¡Œå…§ç·¨è¼¯æ¨¡å¼
  - Deleteï¼ˆç•™è¨€ä½œè€…æ‰èƒ½çœ‹åˆ°ï¼‰â€” ç¢ºèªå¾Œå‘¼å« `DELETE /api/comments/{id}`
  - Report â€” éœ€è¦æ–°çš„ API
- ç‰ˆä¸»å¯ä»¥çœ‹åˆ° Remove é¸é …

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/comment/CommentItem.tsx`
- `src/app/api/comments/[id]/route.ts`ï¼ˆå·²æœ‰ PATCH å’Œ DELETE handlerï¼‰

---

### P1-6: ProfilePostList æŠ•ç¥¨åªæ˜¯ console.log

**ç¾ç‹€ï¼š**
- `ProfilePostList` çš„ `handleVote` å‡½å¼å…§å®¹ç‚º `console.log("Vote:", postId, value)`
- æœ‰æ˜ç¢ºçš„ TODO è¨»è§£ï¼š`// TODO: Implement vote logic`
- åœ¨ä½¿ç”¨è€…å€‹äººé é¢ `/u/[username]` çš„è²¼æ–‡åˆ—è¡¨ä¸­ï¼Œé»æ“ŠæŠ•ç¥¨æ²’æœ‰ä»»ä½•æ•ˆæœ

**æœŸæœ›è¡Œç‚ºï¼š**
- å‘¼å« `POST /api/votes` èˆ‡å…¶ä»–åœ°æ–¹ä¸€è‡´
- ä½¿ç”¨ optimistic update
- å¯ä»¥åƒè€ƒ `FeedContainer.tsx` æˆ– `PostDetailVote.tsx` çš„æŠ•ç¥¨é‚è¼¯

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/profile/ProfilePostList.tsx`ï¼ˆç¬¬ 14-16 è¡Œï¼‰
- `src/app/api/votes/route.ts`ï¼ˆå·²å®Œæˆï¼‰

---

### P1-7: ä½¿ç”¨è€…å€‹äººé é¢ã€ŒFollowã€æŒ‰éˆ•æ²’æœ‰åŠŸèƒ½ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-12ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… Migration å·²å»ºç«‹ï¼š`supabase/migrations/20260212_user_follows.sql`
- âœ… è³‡æ–™è¡¨ï¼š`user_follows` (follower_id, following_id, created_at)
- âœ… ç´„æŸï¼šno_self_follow CHECK (follower_id != following_id)
- âœ… RLS æ”¿ç­–ï¼šä»»ä½•äººå¯æŸ¥çœ‹ï¼Œåªæœ‰ follower å¯æ–°å¢/åˆªé™¤
- âœ… API å·²å»ºç«‹ï¼š`/api/users/[userId]/follow` (POST/DELETE)
- âœ… FollowButton å…ƒä»¶ï¼šæ”¯æ´ optimistic update
- âœ… å€‹äººé é¢æ•´åˆï¼šé¡¯ç¤º Follow/Following æŒ‰éˆ•
- âœ… æ¬Šé™æª¢æŸ¥ï¼šä¸å¯ follow è‡ªå·±ã€åªèƒ½ follow ä¸€èˆ¬ä½¿ç”¨è€…ï¼ˆä¸å« personasï¼‰

**ç›¸é—œæª”æ¡ˆï¼š**
- `supabase/migrations/20260212_user_follows.sql`
- `src/app/api/users/[userId]/follow/route.ts`
- `src/components/profile/FollowButton.tsx`
- `src/app/u/[username]/page.tsx` (ç¬¬ 60-93 è¡Œ)

---

### P1-8: ä½¿ç”¨è€…å€‹äººé é¢ã€ŒFollowersã€æ•¸é‡ hardcoded ç‚º 0 âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-12ï¼Œèˆ‡ P1-7 ä¸€èµ·å®Œæˆï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… æŸ¥è©¢ followers æ•¸é‡ï¼ˆCOUNT user_follows WHERE following_id = userIdï¼‰
- âœ… æŸ¥è©¢ following æ•¸é‡ï¼ˆCOUNT user_follows WHERE follower_id = userIdï¼‰
- âœ… æª¢æŸ¥ç•¶å‰ä½¿ç”¨è€…æ˜¯å¦å·² follow è©² profile
- âœ… å´é‚Šæ¬„é¡¯ç¤ºçœŸå¯¦çš„ Followers æ•¸é‡

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/u/[username]/page.tsx` (ç¬¬ 66-93, 296 è¡Œ)

---

### P1-9: ä½¿ç”¨è€…å€‹äººé é¢ã€ŒCommentsã€åˆ†é æ²’æœ‰è³‡æ–™ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-12ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… æ–°å¢ Comments åˆ†é æŸ¥è©¢é‚è¼¯ï¼ˆæ”¯æ´ user å’Œ personaï¼‰
- âœ… é¡¯ç¤ºç•™è¨€å…§å®¹ + æ‰€å±¬è²¼æ–‡æ¨™é¡Œé€£çµï¼ˆæ–¹æ¡ˆ Aï¼‰
- âœ… é¡¯ç¤ºç¤¾ç¾¤è³‡è¨Šï¼ˆr/boardï¼‰

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/u/[username]/page.tsx` (ç¬¬ 70-92 è¡Œ)
- `src/components/profile/ProfilePostList.tsx` (ç¬¬ 44-82 è¡Œ)

---

### P1-10: ä½¿ç”¨è€…å€‹äººé é¢ã€ŒHiddenã€åˆ†é æ²’æœ‰è³‡æ–™ â¹ï¸

**ç‹€æ…‹ï¼š** å·²å–æ¶ˆï¼ˆ2026-02-12ï¼‰

**åŸå› ï¼š** ç”¨æˆ¶è¦æ±‚ç§»é™¤ Hidden åˆ†é åŠŸèƒ½ï¼Œä¸éœ€è¦å¯¦ä½œ

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/u/[username]/page.tsx` (å·²ç§»é™¤ Hidden åˆ†é å…¥å£)

---

### P1-11: BoardInfoCard å´é‚Šæ¬„ã€ŒJoinã€æŒ‰éˆ•æ²’æœ‰åŠŸèƒ½

**ç¾ç‹€ï¼š**
- `BoardInfoCard` åº•éƒ¨æœ‰ä¸€å€‹ `<button>Join / Joined</button>`ï¼Œæ²’æœ‰ `onClick`
- çœŸæ­£åŠŸèƒ½å®Œæ•´çš„ `JoinButton` å…ƒä»¶å­˜åœ¨ï¼Œä½† `BoardInfoCard` æ²’æœ‰ä½¿ç”¨å®ƒ
- API `/api/boards/[slug]/join` å·²å®Œæˆ

**æœŸæœ›è¡Œç‚ºï¼š**
- å°‡ `BoardInfoCard` åº•éƒ¨çš„ button æ›¿æ›ç‚º `JoinButton` å…ƒä»¶
- æˆ–è€…åœ¨ button ä¸ŠåŠ å…¥å‘¼å« `/api/boards/[slug]/join` çš„ handler

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/board/BoardInfoCard.tsx`ï¼ˆç¬¬ 66-68 è¡Œï¼‰
- `src/components/board/JoinButton.tsx`ï¼ˆå·²å®Œæˆï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼‰

---

### P1-12: CreatePostFormã€ŒAdd tagsã€æŒ‰éˆ•æ²’æœ‰åŠŸèƒ½ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-12ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… é»æ“Šã€ŒAdd tagsã€æ‰“é–‹ä¸‹æ‹‰é¸æ“‡å™¨
- âœ… é¡¯ç¤ºæ‰€æœ‰å¯ç”¨æ¨™ç±¤ï¼Œæ”¯æ´å¤šé¸
- âœ… å·²é¸æ¨™ç±¤é¡¯ç¤ºç‚º badgeï¼Œå¯é»æ“Š X ç§»é™¤
- âœ… æ¨™ç±¤è³‡æ–™å¾ props å‚³å…¥ï¼ˆCreatePost é é¢å·²æŸ¥è©¢ï¼‰
- âœ… é€å‡ºè²¼æ–‡æ™‚åŒ…å« `tagIds` é™£åˆ—

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/create-post/CreatePostForm.tsx` (æ–°å¢æ¨™ç±¤é¸æ“‡å™¨ UI)

---

### P1-13: CreatePostFormã€ŒSave Draftã€èˆ‡ã€ŒDraftsã€æŒ‰éˆ•æ²’æœ‰åŠŸèƒ½ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-12ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… ä½¿ç”¨ localStorage å„²å­˜è‰ç¨¿ï¼ˆkey: `post-drafts`ï¼‰
- âœ… ã€ŒSave Draftã€æŒ‰éˆ•å„²å­˜ç•¶å‰è¡¨å–®ç‹€æ…‹
- âœ… ã€ŒDraftsã€æŒ‰éˆ•æ‰“é–‹ä¸‹æ‹‰åˆ—è¡¨ï¼Œé¡¯ç¤ºæ‰€æœ‰è‰ç¨¿ï¼ˆæœ€å¤š 10 å€‹ï¼‰
- âœ… é»æ“Šè‰ç¨¿å¯è¼‰å…¥å…§å®¹
- âœ… è‰ç¨¿å¯åˆªé™¤
- âœ… è‰ç¨¿åŒ…å«ï¼štitle, body, boardId, tagIds, media, pollOptions, pollDuration, activeTab

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/create-post/CreatePostForm.tsx` (æ–°å¢è‰ç¨¿åŠŸèƒ½)

---

### P1-14: CreatePostFormã€ŒLinkã€åˆ†é çš„ URL è¼¸å…¥æœªç¶å®š state â¹ï¸

**ç‹€æ…‹ï¼š** å·²å–æ¶ˆï¼ˆ2026-02-12ï¼‰

**åŸå› ï¼š** 
- TipTap ç·¨è¼¯å™¨å·²å…§å»ºé€£çµåŠŸèƒ½ï¼ˆä½¿ç”¨ `@tiptap/extension-link`ï¼‰
- Link åˆ†é å·²å¾ CreatePostForm ç§»é™¤
- ä½¿ç”¨è€…å¯åœ¨ Text å’Œ Media è²¼æ–‡çš„ body ä¸­æ’å…¥é€£çµ

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/tiptap-templates/simple/simple-editor.tsx` (å·²æœ‰é€£çµåŠŸèƒ½)

---

### P1-15: CreatePostForm Poll çš„ duration é¸æ“‡å™¨æ²’æœ‰é€å‡º âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-12ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… å‰ç«¯é€å‡º `pollDuration` åƒæ•¸ï¼ˆ1/3/7 å¤©ï¼‰
- âœ… å¾Œç«¯è¨ˆç®— `expires_at` æ™‚é–“æˆ³è¨˜ï¼ˆç•¶å‰æ™‚é–“ + duration å¤©æ•¸ï¼‰
- âœ… å„²å­˜åˆ° `posts.expires_at` æ¬„ä½
- âœ… å»ºç«‹ migration æ–°å¢ `expires_at` æ¬„ä½
- âœ… æ›´æ–° `schema.sql`

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/create-post/CreatePostForm.tsx` (é€å‡º pollDuration)
- `src/app/api/posts/route.ts` (è¨ˆç®—ä¸¦å„²å­˜ expires_at)
- `supabase/migrations/20260212_add_link_text_and_poll_expires.sql` (æ–°å»º)
- `supabase/schema.sql` (æ›´æ–°)
- å‰ç«¯ `PollDisplay` æ ¹æ“š `expires_at` åˆ¤æ–·æ˜¯å¦å·²éæœŸ

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/create-post/CreatePostForm.tsx`
- `src/app/api/posts/route.ts`
- `src/components/post/PollDisplay.tsx`

---

### P1-16: æœå°‹çµæœä¸­çš„ã€ŒJoinã€æŒ‰éˆ•æ²’æœ‰åŠŸèƒ½ â¹ï¸

**ç‹€æ…‹ï¼š** å·²å–æ¶ˆï¼ˆ2026-02-12ï¼‰

**åŸå› ï¼š** ä½¿ç”¨è€…å¯ä»¥ç›´æ¥é»æ“Šç¤¾ç¾¤åç¨±é€²å…¥ç¤¾ç¾¤é é¢å¾Œå† Joinï¼Œä¸éœ€è¦åœ¨æœå°‹çµæœé é¢æä¾› Join æŒ‰éˆ•

---

### P1-17: æœå°‹çµæœä¸­çš„æŠ•ç¥¨æ²’æœ‰åŠŸèƒ½ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆå…ˆå‰å®Œæˆï¼‰

---

### P1-18: Login é é¢ã€ŒForgot Passwordã€é€£çµæŒ‡å‘ä¸å­˜åœ¨çš„é é¢ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-12ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… å»ºç«‹ `/forgot-password` é é¢ï¼ˆè¼¸å…¥ emailï¼Œä½¿ç”¨ `supabase.auth.resetPasswordForEmail()`ï¼‰
- âœ… å»ºç«‹ `/reset-password` é é¢ï¼ˆè™•ç† reset tokenï¼Œä½¿ç”¨ `supabase.auth.updateUser()`ï¼‰
- âœ… åŒ…å«å®Œæ•´çš„éŒ¯èª¤è™•ç†å’ŒæˆåŠŸæç¤º
- âœ… è‡ªå‹•æª¢æŸ¥ session æœ‰æ•ˆæ€§

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/login/login-form.tsx`
- `src/app/forgot-password/page.tsx`ï¼ˆæ–°å»ºï¼‰
- `src/app/reset-password/page.tsx`ï¼ˆæ–°å»ºï¼‰

---

### P1-19: UserMenuã€ŒDisplay Modeã€æŒ‰éˆ•æ²’æœ‰åŠŸèƒ½ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆå…ˆå‰å®Œæˆï¼‰

---

### P1-20: Post Edit é é¢ï¼ˆéœ€å»ºç«‹ï¼‰âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-12ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… **API æ“´å±•**ï¼šPATCH `/api/posts/[id]` æ”¯æ´å…§å®¹ç·¨è¼¯
  - æ”¯æ´ç·¨è¼¯ï¼štitle, body, tagIds
  - æ”¯æ´æ–°å¢ poll optionsï¼ˆnewPollOptionsï¼‰
  - æ¬Šé™æª¢æŸ¥ï¼šåªæœ‰ä½œè€…å¯ä»¥ç·¨è¼¯å…§å®¹
  - ä¸å…è¨±æ›´æ”¹ï¼šboard_id, post_type
- âœ… **PostForm å…ƒä»¶é‡æ§‹**ï¼š
  - é‡å‘½åï¼š`CreatePostForm` â†’ `PostForm`
  - æ–°å¢ `editMode` prop å’Œ `initialData` prop
  - ç·¨è¼¯æ¨¡å¼åŠŸèƒ½ï¼š
    - Board selector é¡¯ç¤ºç‚º disabledï¼ˆä¸å¯æ›´æ”¹ç¤¾ç¾¤ï¼‰
    - Tabs ç¦ç”¨ï¼ˆä¸å¯æ›´æ”¹è²¼æ–‡é¡å‹ï¼‰
    - Poll ç·¨è¼¯ï¼šé¡¯ç¤ºç¾æœ‰é¸é …ï¼ˆä¸å¯ç·¨è¼¯/åˆªé™¤ï¼‰+ æ–°å¢é¸é …è¼¸å…¥æ¡†
    - è‰ç¨¿åŠŸèƒ½ï¼šlocalStorage key ç‚º `post-edit-draft-{postId}`
    - æŒ‰éˆ•æ–‡å­—ï¼šUpdate / Updating...
- âœ… **ç·¨è¼¯é é¢**ï¼š`/app/r/[slug]/posts/[id]/edit/page.tsx`
  - æ¬Šé™æª¢æŸ¥ï¼šåªæœ‰ä½œè€…å¯ç·¨è¼¯ï¼ˆpersona è²¼æ–‡ç”±å…¶ä»– app è™•ç†ï¼‰
  - DELETED ç‹€æ…‹è™•ç†ï¼šé¡¯ç¤ºæ¨™é¡Œ + ã€Œå·²åˆªé™¤ã€æç¤º
  - é è¼‰è³‡æ–™ï¼štitle, body, tags, media, poll options
  - æŸ¥è©¢æ‰€æœ‰ boards å’Œ tags ä¾›è¡¨å–®ä½¿ç”¨

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/api/posts/[id]/route.ts` (PATCH handler æ“´å±•)
- `src/components/create-post/PostForm.tsx` (é‡å‘½åä¸¦æ“´å±•)
- `src/app/r/[slug]/posts/[id]/edit/page.tsx` (æ–°å»º)
- `src/app/submit/page.tsx` (import æ›´æ–°)

---

## P2 â€” åŠŸèƒ½ä¸å®Œæ•´æˆ–è³‡æ–™æœªé€£æ¥

### P2-1: Feed æ²’æœ‰åˆ†é  / ç„¡é™æ»¾å‹•

**ç¾ç‹€ï¼š**
- `FeedContainer` åªæ¸²æŸ“ `initialPosts`ï¼ˆå¾ server å‚³å…¥çš„åˆå§‹è³‡æ–™ï¼‰
- æ²’æœ‰ã€ŒLoad moreã€æŒ‰éˆ•ã€æ²’æœ‰ infinite scrollã€æ²’æœ‰ page åƒæ•¸
- ä½¿ç”¨è€…åªèƒ½çœ‹åˆ°ç¬¬ä¸€æ‰¹è²¼æ–‡

**æœŸæœ›è¡Œç‚ºï¼š**
- å¯¦ä½œ infinite scrollï¼ˆä½¿ç”¨ IntersectionObserverï¼‰æˆ–ã€ŒLoad moreã€æŒ‰éˆ•
- å‚³å…¥åˆ†é åƒæ•¸ï¼ˆoffset / cursorï¼‰çµ¦ `/api/posts`
- æ–°è²¼æ–‡è¿½åŠ åˆ°ç¾æœ‰åˆ—è¡¨å¾Œæ–¹

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/feed/FeedContainer.tsx`
- `src/app/api/posts/route.ts`

---

### P2-2: Board é é¢çš„ Feed æ’åºç„¡æ•ˆ

**ç¾ç‹€ï¼š**
- `FeedSortBar` åœ¨ Board é é¢ä½¿ç”¨ `<Link>` æ¨¡å¼ï¼Œé»æ“Šæœƒæ”¹è®Š URLï¼ˆå¦‚ `?sort=hot`ï¼‰
- ä½† Board é é¢æ˜¯ server componentï¼ŒæŸ¥è©¢å›ºå®šç”¨ `order("created_at", { ascending: false })`
- URL çš„ sort åƒæ•¸è¢«å®Œå…¨å¿½ç•¥ï¼Œè²¼æ–‡æ°¸é æŒ‰å»ºç«‹æ™‚é–“æ’åˆ—

**æœŸæœ›è¡Œç‚ºï¼š**
- Board é é¢è®€å– URL çš„ `sort` å’Œ `t` åƒæ•¸
- æ ¹æ“šåƒæ•¸å¥—ç”¨å°æ‡‰çš„æ’åºé‚è¼¯ï¼ˆhot/new/top/risingï¼‰
- å¯åƒè€ƒé¦–é çš„å¯¦ä½œæ–¹å¼

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/r/[slug]/page.tsx`
- `src/components/feed/FeedSortBar.tsx`
- `src/lib/ranking.ts`

---

### P2-3: é¦–é å’Œ Board é é¢çš„ userVote æœªé è¼‰

**ç¾ç‹€ï¼š**
- Feed ä¸­æ¯å€‹è²¼æ–‡çš„ `userVote` éƒ½æ˜¯ `null`
- å³ä½¿ä½¿ç”¨è€…å·²ç¶“æŠ•éç¥¨ï¼ŒUI ä¹Ÿä¸æœƒé¡¯ç¤ºæŠ•ç¥¨ç‹€æ…‹
- é»æ“ŠæŠ•ç¥¨å¯ä»¥æ­£å¸¸é‹ä½œï¼Œä½†é‡æ–°æ•´ç†å¾Œç‹€æ…‹æ¶ˆå¤±

**æœŸæœ›è¡Œç‚ºï¼š**
- å¦‚æœä½¿ç”¨è€…å·²ç™»å…¥ï¼ŒæŸ¥è©¢ `votes` è¡¨å–å¾—è©²ä½¿ç”¨è€…å°æ‰€æœ‰é¡¯ç¤ºä¸­è²¼æ–‡çš„æŠ•ç¥¨ç´€éŒ„
- å°‡ `userVote` æ­£ç¢ºå‚³å…¥æ¯å€‹ `PostRow`

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/page.tsx`
- `src/app/r/[slug]/page.tsx`
- `src/components/feed/FeedContainer.tsx`

---

### P2-4: RightSidebarã€ŒRecent Postsã€å®Œå…¨æ˜¯å‡è³‡æ–™ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-12ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… å¾ `/api/posts?sort=new` ç²å–çœŸå¯¦çš„æœ€æ–° 5 ç¯‡è²¼æ–‡
- âœ… ç§»é™¤å‡è³‡æ–™å’Œ "Clear" æŒ‰éˆ•
- âœ… é¡¯ç¤ºçœŸå¯¦çš„åˆ†æ•¸ã€ç•™è¨€æ•¸å’Œæ™‚é–“
- âœ… è²¼æ–‡é€£çµæ›´æ–°ç‚º `/r/[slug]/posts/[id]`

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/layout/RightSidebar.tsx` (æ”¹ç‚º client componentï¼Œä½¿ç”¨ useEffect fetch è³‡æ–™)

---

### P2-5: UserMenu Karma æ•¸å­— hardcoded ç‚ºã€Œ1 karmaã€

**ç¾ç‹€ï¼š**
- æ°¸é é¡¯ç¤ºã€Œ1 karmaã€ï¼Œä¸ç®¡å¯¦éš› karma å¤šå°‘
- Profile è³‡æ–™è¡¨ä¸­æœ‰ `karma` æ¬„ä½

**æœŸæœ›è¡Œç‚ºï¼š**
- å¾ profile è³‡æ–™ä¸­è®€å–çœŸå¯¦çš„ karma æ•¸å€¼
- profile è³‡æ–™å·²åœ¨ `layout.tsx` ä¸­å–å¾—ï¼Œéœ€è¦å‚³éåˆ° UserMenu

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/layout/UserMenu.tsx`
- `src/app/layout.tsx`

---

### P2-6: MobileSearchOverlay æœå°‹ä¸æœƒå‘¼å« API â¹ï¸

**ç‹€æ…‹ï¼š** å·²å–æ¶ˆï¼ˆå·²åœ¨ Mobile M-1 ä»»å‹™ä¸­å®Œæˆï¼Œ2026-02-12ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… å·²åœ¨ mobile/incomplete-features.md çš„ M-1 ä»»å‹™ä¸­å®Œæˆ
- âœ… æ•´åˆ SearchBar çš„æœå°‹é‚è¼¯ï¼ˆdebounce 300msï¼‰
- âœ… å‘¼å« `/api/search` å–å¾—å³æ™‚æœå°‹çµæœ
- âœ… é¡¯ç¤ºæœ€å¤š 5 ç­†è²¼æ–‡çµæœ

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/search/MobileSearchOverlay.tsx`

---

### P2-7: Post Detail é é¢å´é‚Šæ¬„ member/online æ•¸å­—æ˜¯å‡çš„ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-12ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… è²¼æ–‡è·¯å¾‘é‡æ§‹ç‚º `/r/[slug]/posts/[id]`
- âœ… Board layout çµ±ä¸€ç®¡ç†å´é‚Šæ¬„ï¼ˆBoardInfoCardã€BoardRulesCardã€BoardModeratorsCardï¼‰
- âœ… Members æ•¸é‡ä½¿ç”¨ `board.member_count` çœŸå¯¦è³‡æ–™
- âœ… ç§»é™¤ Online æ•¸å­—ï¼ˆä¸éœ€è¦ presence åŠŸèƒ½ï¼‰
- âœ… ç§»é™¤é‡è¤‡çš„ board æŸ¥è©¢é‚è¼¯

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/r/[slug]/layout.tsx` (æ–°å»ºï¼Œçµ±ä¸€æŸ¥è©¢ board è³‡æ–™)
- `src/app/r/[slug]/posts/[id]/page.tsx` (æ–°å»ºï¼Œç°¡åŒ–çš„è²¼æ–‡é é¢)
- `src/components/board/BoardInfoCard.tsx` (ç§»é™¤ useMemberCount Context)

---

### P2-8: Tag é é¢çš„è²¼æ–‡åˆ—è¡¨å¤ªç°¡é™‹ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-12ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… ä½¿ç”¨ `PostRow` å…ƒä»¶é¡¯ç¤ºå®Œæ•´è²¼æ–‡è³‡è¨Š
- âœ… åŒ…å«æŠ•ç¥¨åŠŸèƒ½ï¼ˆå« optimistic updateï¼‰
- âœ… é¡¯ç¤ºä½œè€…è³‡è¨Šã€board åç¨±ã€ç•™è¨€æ•¸ã€åˆ†æ•¸ã€æ™‚é–“æˆ³è¨˜
- âœ… æ”¯æ´ user å’Œ persona ä½œè€…
- âœ… é è¼‰ä½¿ç”¨è€…çš„æŠ•ç¥¨ç‹€æ…‹

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/tags/[slug]/page.tsx`ï¼ˆé‡æ§‹ç‚ºä½¿ç”¨ TagFeedï¼‰
- `src/components/tag/TagFeed.tsx`ï¼ˆæ–°å»ºï¼Œclient componentï¼‰
- `src/components/post/PostRow.tsx`

---

## P3 â€” å£æ‰çš„é€£çµèˆ‡å­¤ç«‹å…ƒä»¶

### P3-1: ç§»é™¤ /popular é€£çµ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆå…ˆå‰å®Œæˆï¼‰

---

### P3-2: /about é€£çµæŒ‡å‘ä¸å­˜åœ¨çš„é é¢ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-12ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… å»ºç«‹ `/about` é é¢ï¼ˆä½”ä½ç¬¦ï¼ŒåŒ…å«å°ˆæ¡ˆç°¡ä»‹ã€åŠŸèƒ½åˆ—è¡¨ã€æŠ€è¡“æ£§ï¼‰
- âœ… DrawerSidebar çš„ About é€£çµç¾åœ¨å¯æ­£å¸¸é‹ä½œ

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/layout/DrawerSidebar.tsx`
- `src/app/about/page.tsx`ï¼ˆæ–°å»ºï¼‰

---

### P3-3: BoardLayout ç®¡ç†é€£çµæ²’æœ‰æ¬Šé™æª¢æŸ¥ï¼ˆæ‰‹æ©Ÿç‰ˆï¼‰âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆå…ˆå‰åœ¨ M-3 ä¸­å®Œæˆï¼Œ2026-02-12 ç¢ºèªï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… BoardLayout æ–°å¢ `canManage` prop
- âœ… åªæœ‰ moderator/owner æ‰èƒ½çœ‹åˆ°ä¸‰é»é¸å–®æŒ‰éˆ•
- âœ… Board é é¢æŸ¥è©¢ä½¿ç”¨è€…çš„ moderator ç‹€æ…‹ä¸¦å‚³é
- âœ… éç®¡ç†è€…å®Œå…¨çœ‹ä¸åˆ°ç®¡ç†é¸å–®å…¥å£

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/board/BoardLayout.tsx` (ç¬¬ 23, 37-57 è¡Œ)
- `src/app/r/[slug]/page.tsx` (ç¬¬ 129-141 è¡Œ)

---

### P3-4: æœå°‹é é¢ People çµæœæ²’æœ‰é€£çµåˆ°å€‹äººé é¢ âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆå…ˆå‰å·²å®Œæˆï¼Œ2026-02-12 ç¢ºèªï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… Users çµæœå·²ç”¨ `<Link>` åŒ…è£¹ï¼Œé€£çµåˆ° `/u/${user.username}`
- âœ… Personas çµæœä¹Ÿæœ‰é€£çµåˆ° `/p/${persona.slug}`
- âœ… æ‰€æœ‰ People æœå°‹çµæœéƒ½å¯é»æ“Š

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/app/search/page.tsx` (ç¬¬ 112-119, 126-133 è¡Œ)

---

### P3-5: NotificationBell æ²’æœ‰å³æ™‚æ›´æ–° âœ…

**ç‹€æ…‹ï¼š** å·²å®Œæˆï¼ˆ2026-02-12ï¼‰

**å¯¦ä½œå…§å®¹ï¼š**
- âœ… å¯¦ä½œ polling æ©Ÿåˆ¶ï¼ˆæ¯ 30 ç§’è‡ªå‹•æª¢æŸ¥æ–°é€šçŸ¥ï¼‰
- âœ… åŠ å…¥ Page Visibility APIï¼ˆç•¶ä½¿ç”¨è€…åˆ‡å›é é¢æ™‚ç«‹å³æ›´æ–°ï¼‰
- âœ… ä½¿ç”¨ `useOptionalUserContext()` æª¢æŸ¥ç™»å…¥ç‹€æ…‹
- âœ… åªå°å·²ç™»å…¥ä½¿ç”¨è€…é¡¯ç¤ºå’Œæ›´æ–°é€šçŸ¥
- âœ… è‡ªå‹•æ¸…ç† interval å’Œ event listenerï¼ˆé¿å…è¨˜æ†¶é«”æ´©æ¼ï¼‰

**ç›¸é—œæª”æ¡ˆï¼š**
- `src/components/notification/NotificationBell.tsx` (å·²æ›´æ–°)

---

## å¯¦ä½œé †åºå»ºè­°

### ç¬¬ä¸€éšæ®µï¼šAdmin åŸºç¤è¨­æ–½ï¼ˆPA ç³»åˆ—å¿…é ˆæœ€å…ˆåšï¼‰

| é †åº | ä»»å‹™ | ç†ç”± |
|------|------|------|
| 1 | PA-1 | å»ºç«‹ admin_users è³‡æ–™è¡¨ï¼Œæ‰€æœ‰å¾ŒçºŒ admin åŠŸèƒ½çš„åŸºç¤ |
| 2 | PA-2 | å»ºç«‹ isAdmin å…±ç”¨å‡½å¼ï¼Œå¾ŒçºŒ API éƒ½éœ€è¦å¼•ç”¨ |
| 3 | PA-3 | Board archive æ”¹ç‚º admin-onlyï¼ˆä¿®æ”¹ç¾æœ‰ APIï¼‰ |
| 4 | PA-4 | Board unarchive åŠŸèƒ½ï¼ˆæ–°å¢ API + UIï¼‰ |
| 5 | PA-5 | Post ä½œè€…è‡ªåˆª APIï¼ˆæ–°å¢ DELETE handlerï¼‰ |
| 6 | PA-6 | Post archive åŠŸèƒ½ â€” admin/mod å¯æ“ä½œ |
| 7 | PA-7 | ä¿®æ­£ moderator æ¬Šé™ dead codeï¼ˆmanage_posts / manage_settingsï¼‰ |

### ç¬¬äºŒéšæ®µï¼šå¿«é€Ÿä¿®æ­£ï¼ˆæ›¿æ› / æ¥ç·šï¼‰

| é †åº | ä»»å‹™ | ç†ç”± |
|------|------|------|
| 8 | P3-1 | æœ€å¿«å®Œæˆï¼Œç§»é™¤å£æ‰çš„é€£çµ |
| 9 | P1-11 | ä¸€è¡Œæ›¿æ›ï¼Œå°‡å‡æŒ‰éˆ•æ›æˆçœŸå…ƒä»¶ |
| 10 | P1-19 | ä¸€è¡Œæ›¿æ›ï¼Œæ•´åˆå·²å­˜åœ¨çš„ ThemeToggle |
| 11 | P2-5 | ç°¡å–®è³‡æ–™å‚³éï¼Œä¿®æ­£ karma é¡¯ç¤º |
| 12 | P1-1, P1-2 | Save/Hide åŠŸèƒ½ï¼ŒAPI å·²å­˜åœ¨ |
| 13 | P1-4 | Comments æŒ‰éˆ•åŠ ä¸Šå°èˆª |
| 14 | P1-6, P1-17 | æŠ•ç¥¨åŠŸèƒ½ä¿®æ­£ï¼ˆåƒè€ƒç¾æœ‰å¯¦ä½œï¼‰ |
| 15 | P1-14 | Link post ä¿®æ­£ï¼ˆç¶å®š stateï¼‰ |

### ç¬¬ä¸‰éšæ®µï¼šä¸­å‹åŠŸèƒ½

| é †åº | ä»»å‹™ | ç†ç”± |
|------|------|------|
| 16 | P1-3, P1-5 | More é¸å–®ï¼ˆéœ€è¦å»ºç«‹ä¸‹æ‹‰å…ƒä»¶ï¼Œèˆ‡ PA-5/PA-6 æ•´åˆï¼‰ |
| 17 | P0-1, P0-2 | é€šçŸ¥é é¢æ¥ä¸Šå¾Œç«¯ï¼ˆAPI å·²å­˜åœ¨ï¼‰ |
| 18 | P2-1 | Feed åˆ†é  / ç„¡é™æ»¾å‹• |
| 19 | P2-2 | Board æ’åºä¿®æ­£ |
| 20 | P2-3 | userVote é è¼‰ |
| 21 | P2-6 | æ‰‹æ©Ÿç‰ˆæœå°‹ä¿®æ­£ |

### ç¬¬å››éšæ®µï¼šè£œå®Œèˆ‡æ–°åŠŸèƒ½

| é †åº | ä»»å‹™ | ç†ç”± |
|------|------|------|
| 22 | P2-4 | RightSidebar çœŸå¯¦è³‡æ–™ |
| 23 | P2-7 | å´é‚Šæ¬„æ•¸å­—ä¿®æ­£ |
| 24 | P1-9, P1-10 | å€‹äººé é¢ Comments/Hidden åˆ†é  |
| 25 | P1-12 | æ¨™ç±¤é¸æ“‡å™¨ |
| 26 | P1-15 | Poll duration |
| 27 | P1-16 | æœå°‹çµæœ Join æŒ‰éˆ• |
| 28 | P1-18 | Forgot Password æµç¨‹ |
| 29 | P1-7, P1-8 | Follow åŠŸèƒ½ï¼ˆéœ€æ–°å»ºè³‡æ–™è¡¨å’Œ APIï¼‰ |
| 30 | P1-13 | è‰ç¨¿åŠŸèƒ½ï¼ˆéœ€æ±ºå®šæ–¹æ¡ˆï¼‰ |
| 31 | P2-8 | Tag é é¢æ”¹å–„ |
| 32 | P3-2 | About é é¢ |
| 33 | P3-3 | æ¬Šé™æª¢æŸ¥ä¿®æ­£ |
| 34 | P3-4 | æœå°‹ People é€£çµ |
| 35 | P3-5 | é€šçŸ¥å³æ™‚æ›´æ–° |
